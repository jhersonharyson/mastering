const links = [    "https://ieeexplore.ieee.org/document/8506483/",
    "https://ieeexplore.ieee.org/document/8918951/",
    "https://ieeexplore.ieee.org/document/7579769/",
    "https://ieeexplore.ieee.org/document/6975646/",
    "https://ieeexplore.ieee.org/document/9018121/",
    "https://ieeexplore.ieee.org/document/8529834/",
    "https://ieeexplore.ieee.org/document/7883314/",
    "https://ieeexplore.ieee.org/document/8190557/",
    "https://ieeexplore.ieee.org/document/9402040/",
    "https://ieeexplore.ieee.org/document/9401952/",
    "https://ieeexplore.ieee.org/document/8918988/",
    "https://ieeexplore.ieee.org/document/9462958/",
    "https://ieeexplore.ieee.org/document/9033650/",
    "https://ieeexplore.ieee.org/document/9206239/",
    "https://ieeexplore.ieee.org/document/6080828/",
    "https://ieeexplore.ieee.org/document/8530141/",
    "https://ieeexplore.ieee.org/document/7739672/",
    "https://ieeexplore.ieee.org/document/8530713/",
    "https://ieeexplore.ieee.org/document/8453144/",
    "https://ieeexplore.ieee.org/document/8783269/",
    "https://ieeexplore.ieee.org/document/7476773/",
    "https://ieeexplore.ieee.org/document/9401960/",
    "https://ieeexplore.ieee.org/document/1576657/",
    "https://ieeexplore.ieee.org/document/5655415/",
    "https://ieeexplore.ieee.org/document/5441291/",
    "https://ieeexplore.ieee.org/document/8811986/",
    "https://ieeexplore.ieee.org/document/1517980/",
    "https://ieeexplore.ieee.org/document/8170129/",
    "https://ieeexplore.ieee.org/document/5341622/",
    "https://ieeexplore.ieee.org/document/9286073/",
    "https://ieeexplore.ieee.org/document/8327148/",
    "https://ieeexplore.ieee.org/document/6240479/",
    "https://ieeexplore.ieee.org/document/8443580/",
    "https://ieeexplore.ieee.org/document/9402195/",
    "https://ieeexplore.ieee.org/document/8445186/",
    "https://ieeexplore.ieee.org/document/9054866/",
    "https://ieeexplore.ieee.org/document/6577704/",
    "https://ieeexplore.ieee.org/document/9291991/",
    "https://ieeexplore.ieee.org/document/7883332/",
    "https://ieeexplore.ieee.org/document/7787061/",
    "https://ieeexplore.ieee.org/document/4159683/",
    "https://ieeexplore.ieee.org/document/7934714/",
    "https://ieeexplore.ieee.org/document/1703172/",
    "https://ieeexplore.ieee.org/document/7819415/",
    "https://ieeexplore.ieee.org/document/8103453/",
    "https://ieeexplore.ieee.org/document/4293578/",
    "https://ieeexplore.ieee.org/document/7321540/",
    "https://ieeexplore.ieee.org/document/9284010/",
    "https://ieeexplore.ieee.org/document/9354557/",
    "https://ieeexplore.ieee.org/document/9101319/",
    "https://ieeexplore.ieee.org/document/6798719/",
    "https://ieeexplore.ieee.org/document/1372298/",
    "https://ieeexplore.ieee.org/document/7927991/",
    "https://ieeexplore.ieee.org/document/4814149/",
    "https://ieeexplore.ieee.org/document/7836020/",
    "https://ieeexplore.ieee.org/document/8120408/",
    "https://ieeexplore.ieee.org/document/6597258/",
    "https://ieeexplore.ieee.org/document/8506584/",
    "https://ieeexplore.ieee.org/document/6227191/",
    "https://ieeexplore.ieee.org/document/9438551/",
    "https://ieeexplore.ieee.org/document/6289732/",
    "https://ieeexplore.ieee.org/document/4023973/",
    "https://ieeexplore.ieee.org/document/8816812/",
    "https://ieeexplore.ieee.org/document/6636708/",
    "https://ieeexplore.ieee.org/document/1374310/",
    "https://ieeexplore.ieee.org/document/7886977/",
    "https://ieeexplore.ieee.org/document/8009946/",
    "https://ieeexplore.ieee.org/document/4276318/",
    "https://ieeexplore.ieee.org/document/9380367/",
    "https://ieeexplore.ieee.org/document/1612150/",
    "https://ieeexplore.ieee.org/document/8813259/",
    "https://ieeexplore.ieee.org/document/4639360/",
    "https://ieeexplore.ieee.org/document/9463051/",
    "https://ieeexplore.ieee.org/document/6779532/",
    "https://ieeexplore.ieee.org/document/8359160/",
    "https://ieeexplore.ieee.org/document/8283568/",
    "https://ieeexplore.ieee.org/document/8634026/",
    "https://ieeexplore.ieee.org/document/8811911/",
    "https://ieeexplore.ieee.org/document/9069309/",
    "https://ieeexplore.ieee.org/document/8802103/",
    "https://ieeexplore.ieee.org/document/8811913/",
    "https://ieeexplore.ieee.org/document/6205768/",
    "https://ieeexplore.ieee.org/document/4639187/",
    "https://ieeexplore.ieee.org/document/7069257/",
    "https://ieeexplore.ieee.org/document/6980214/",
    "https://ieeexplore.ieee.org/document/9240623/",
    "https://ieeexplore.ieee.org/document/1684299/",
    "https://ieeexplore.ieee.org/document/1509509/",
    "https://ieeexplore.ieee.org/document/4639335/",
    "https://ieeexplore.ieee.org/document/7809588/",
    "https://ieeexplore.ieee.org/document/9401967/",
    "https://ieeexplore.ieee.org/document/7203106/",
    "https://ieeexplore.ieee.org/document/9284005/",
    "https://ieeexplore.ieee.org/document/9402240/",
    "https://ieeexplore.ieee.org/document/7926535/",
    "https://ieeexplore.ieee.org/document/1691578/",
    "https://ieeexplore.ieee.org/document/9240489/",
    "https://ieeexplore.ieee.org/document/6821840/",
    "https://ieeexplore.ieee.org/document/8726280/",
    "https://ieeexplore.ieee.org/document/5290717/",
    "https://ieeexplore.ieee.org/document/1372335/",
    "https://ieeexplore.ieee.org/document/8947832/",
    "https://ieeexplore.ieee.org/document/7985656/",
    "https://ieeexplore.ieee.org/document/9083729/",
    "https://ieeexplore.ieee.org/document/8658852/",
    "https://ieeexplore.ieee.org/document/4296971/",
    "https://ieeexplore.ieee.org/document/4602674/",
    "https://ieeexplore.ieee.org/document/6648179/",
    "https://ieeexplore.ieee.org/document/7420475/",
    "https://ieeexplore.ieee.org/document/7217777/",
    "https://ieeexplore.ieee.org/document/7140652/"
]

const processed = [
  107, 105, 104, 103, 102,
         101, 100,  97,  96,  95,  94,
          93,  92,  91,  90,  89,  88,
          87,  86,  85,  84,  82,  80,
          79,  77,  76,  74,  73,  72,
          71,  70,  69,  67,  66,  65,
          64,  63,  62,  61,  59,  58,
          57,  56,  55,  54,  53,  52,
          51,  49,  47,  46,  45,  44,
          42,  41,  40,  39,  38,  37,
          36,  35,  34,  33,  32,  31,
          30,  29,  28,  27,  26,  25,
          23,  21,  20,  19,  18,  17,
          16,  15,  14,  13,  12,  11,
          10,   9,   8,   7,   6,   5,
           3,   2,   1,   0
]
describe('Get all bibTex from IEEE Xplore references', () => {
    links.map((link, i) => {
      if([60, 98].includes(i))
         it('Get references! #'+i, () => {
            cy.viewport(1360, 568)
 
            cy.visit(link)
         
            // cy.get('.u-mb-1 > .cite-this-related-btn-wrapper > xpl-cite-this-modal > div > .layout-btn-white').click()
         
            // cy.get('.cite-this-container > .tab-nav > .row > .browse-pub-tab:nth-child(2) > .document-tab-link').click()

            // cy.get('body > ngb-modal-window > div > div > div > div:nth-child(4) > pre').then(text => {
            //                 cy.log(text)
            //             })

            cy.get('.u-mb-1 > .cite-this-related-btn-wrapper > xpl-cite-this-modal > div > .layout-btn-white')
            .click().then(()=>{
                cy.get('.cite-this-container > .tab-nav > .row > .browse-pub-tab:nth-child(2) > .document-tab-link')
                .click().then(()=> {
                    cy.wait(1500)
                    cy.get('body > ngb-modal-window > div > div > div > div:nth-child(4) > pre').then(text => {
                        cy.log(text.text())
                        const success = text.text().includes('@INPROCEEDINGS') || text.text().includes('@ARTICLE') || text.text().includes('BOOK{')
                        
                        if(success){
                          cy.writeFile('C:\\Users\\J.Haryson\\Desktop\\workspace\\mastering\\methodoly\\cypress\\downloads\\'+i+'.bib', text.text())
                        }else {
                          cy.writeFile('C:\\Users\\J.Haryson\\Desktop\\workspace\\mastering\\methodoly\\cypress\\downloads\\errors.txt', link+'\n', { flag: 'a+' })
                        }

                        expect(success).to.equal(true)
                    })
                })
            })
    
    })
    })
   
  })